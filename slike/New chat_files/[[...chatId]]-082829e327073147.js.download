(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{49529:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[[...chatId]]",function(){return n(82673)}])},82673:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return R},default:function(){return z}});var r=n(61706),s=n(45813),i=n(35250),a=n(91530),o=n.n(a),l=n(61432),c=n(70079),u=n(73925),d=n(62676),h="oai/apps/hasSeenReleaseAnnouncement",m="2022-12-19";function f(e){var t=e.hasSeenOnboardingDate,n=(0,c.useState)(function(){return!Boolean(d.m.getItem("".concat(h,"/").concat(m)))&&!!t&&t<new Date(m)}),r=n[0],s=n[1],a=(0,c.useState)(!1),o=a[0],l=a[1];(0,c.useEffect)(function(){l(!0)},[]);var f=(0,c.useCallback)(function(){d.m.setItem("".concat(h,"/").concat(m),!0),s(!1)},[]);return o?(0,i.jsx)(u.Z,{size:"xs",isOpen:r,onModalClose:f,type:"success",title:"",primaryButton:(0,i.jsx)(u.m,{title:"Sounds good!",color:"primary",onClick:f}),children:(0,i.jsxs)("div",{className:"mb-6 flex flex-col gap-6",children:[(0,i.jsx)("div",{className:"text-gray-800 dark:text-white",children:"Dec 15 version update"}),(0,i.jsx)("div",{className:"text-2xl",children:"Here's what's new"}),(0,i.jsx)("div",{className:"prose text-base dark:prose-invert",children:(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"We've begun to roll out chat history. You'll soon be able to view and continue your past conversations."}),(0,i.jsx)("li",{children:"Among other improvements, you will notice that ChatGPT is now less likely to refuse to answer questions. We look forward to your feedback."})]})})]})}):null}var p,x=n(22896),b=n(44513),v=n(14806),g=n(1454),j=n(34303),w=n(12762),y=n(98943),N=n(39690),k=(0,n(59268).ZP)()(function(e){return{shouldRateLimitBeVisible:Boolean(d.m.getItem("".concat("oai/apps/showRateLimitCaptcha","/chat"))),isRateLimitBubbleMinimized:!1,setIsRateLimitBubbleMinimized:function(t){return e({isRateLimitBubbleMinimized:t})},isModelVisible:!1,setIsModelVisible:function(t){return e({isModelVisible:t})}}});function C(){var e=(0,v.Z)(["prose dark:prose-invert"]);return C=function(){return e},e}function I(){var e=(0,w.WS)(),t=(0,l.useRouter)();(0,c.useEffect)(function(){e(y.s6.rateLimitModalLoaded)},[e]);var n=(0,c.useCallback)(function(){e(y.s6.rateLimitModalActionClicked)},[e]),r=k(function(e){return e.setIsModelVisible}),s=(0,c.useCallback)(function(){r(!1)},[r]);return(0,i.jsxs)(S,{children:[(0,i.jsxs)("div",{className:"relative mb-5",children:[(0,i.jsx)("h3",{className:"!mt-0 !mb-2 font-normal text-gray-700 dark:text-white",children:(0,i.jsx)("b",{children:"You've hit your daily limit"})}),(0,i.jsx)("h4",{className:"mb-4 font-normal",children:"To ensure a high-quality experience for all ChatGPT users, we're temporarily limiting the number of daily messages anyone can send."}),(0,i.jsx)("button",{className:"absolute top-0 right-2",onClick:s,type:"button",children:(0,i.jsx)(g.q5L,{className:"h-5 w-5 hover:bg-gray-50"})})]}),(0,i.jsx)("div",{className:"-mx-4 -mb-4 bg-green-700 px-4 pt-5 pb-4 dark:text-white sm:-m-6 sm:-mb-12 sm:mt-6 sm:px-6 sm:pb-8",children:(0,i.jsxs)("div",{className:"flex flex-row gap-2 sm:gap-4",children:[(0,i.jsxs)("div",{className:"text-white",children:[(0,i.jsx)("b",{children:"Want to keep chatting?"})," Get increased access for today by helping us improve ChatGPT."]}),(0,i.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,i.jsx)(N.z,{as:"button",color:"primary-invert",to:"/rate-limit-task",onClick:function(){t.push("/rate-limit"),n()},children:(0,i.jsx)("span",{className:"whitespace-nowrap",children:"Complete Captcha"})})})]})})]})}var S=j.Z.div(C());let L=c.forwardRef(function({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))}),M=c.forwardRef(function({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))});function _(e){e.botContext;var t=(0,c.useState)(!1),n=t[0],r=t[1],s=k(function(e){return e.setIsModelVisible}),a=function(){s(!0)};return n?(0,i.jsx)(E,{setIsRateLimitBubbleMinimized:r}):(0,i.jsx)("div",{className:"fixed inset-x-0 top-16 z-10 pb-2 sm:pb-5 md:top-4 md:pl-[260px]",children:(0,i.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"rounded-lg bg-red-600 bg-opacity-80 p-2 shadow-lg hover:bg-opacity-100",children:(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex w-0 flex-1 items-center",children:[(0,i.jsx)("span",{className:"flex rounded-lg p-2",children:(0,i.jsx)(L,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),(0,i.jsx)("p",{className:"ml-3 truncate text-sm font-medium text-white",children:(0,i.jsx)("span",{className:"",children:"Captcha required to process your request. We are experiencing high traffic."})})]}),(0,i.jsx)("div",{className:"order-3 mt-2 w-full flex-shrink-0 sm:order-2 sm:mt-0 sm:w-auto",children:(0,i.jsx)("button",{onClick:a,className:"z-10 flex items-center justify-center rounded-md border border-transparent bg-white px-4 py-1.5 text-sm font-medium text-red-600 shadow-sm hover:bg-red-50",children:"Increase limit"})}),(0,i.jsx)("div",{className:"order-2 flex-shrink-0 sm:order-3 sm:ml-2",children:(0,i.jsxs)("button",{type:"button",onClick:function(e){r(!0)},className:"-mr-1 flex rounded-md p-2 hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-white",children:[(0,i.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,i.jsx)(M,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})]})})})})}var E=function(e){var t=e.setIsRateLimitBubbleMinimized;return(0,i.jsx)("div",{className:"fixed right-6 top-16 z-30 pb-2 sm:pb-5 md:top-4",children:(0,i.jsx)("div",{className:"order-2 flex-shrink-0 sm:order-3",children:(0,i.jsx)("div",{className:"rounded-lg bg-red-600 bg-opacity-80 shadow-lg hover:bg-opacity-100",children:(0,i.jsx)("button",{type:"button",onClick:function(e){t(!1)},className:"-mr-1 flex rounded-md p-2 hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-white",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"flex rounded-lg p-2",children:(0,i.jsx)(L,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),(0,i.jsx)("p",{className:"pr-4 text-sm font-medium text-white",children:(0,i.jsx)("span",{className:"",children:"Limit reached. Captcha required."})})]})})})})})},Z=n(49690),P=n(500),O=n(85664);function V(){return(V=(0,r.Z)(function(e){return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,O.cc)(e,!1)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}var R=!0;function z(e){var t=e.user,n=e.accessToken,r=e.paletteFeatures,s=e.features,a=e.pages,d=e.initialData,h=(0,c.useState)(!1),m=h[0],p=h[1],v=(0,c.useMemo)(function(){return P.TJ},[]),g=(0,l.useRouter)(),j=(0,c.useState)(d),N=j[0],C=j[1],S=k(function(e){return e.shouldRateLimitBeVisible}),L=(0,b.PV)(v.id).getHasSeenOnboardingDate,M=(0,c.useMemo)(function(){return{app:y.VY,origin:"chat"}},[]);(0,Z.Z)("ChatGPT",t,n,M),(0,c.useEffect)(function(){p(!L())},[L]),(0,c.useEffect)(function(){var e,t=null===(e=g.query.chatId)||void 0===e?void 0:e[0];t!==N.threadId&&(t?(function(e){return V.apply(this,arguments)})(t).then(function(e){return e&&C(e)}):C((0,O.PH)()))},[n,d.threadId,g.query.chatId,null==N?void 0:N.threadId,]);var E=k(function(e){return e.isModelVisible});return(0,i.jsx)(P.yP.Provider,{value:v,children:(0,i.jsxs)(w.Af.Provider,{value:M,children:[S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_,{botContext:v}),(0,i.jsx)(u.Z,{size:"medium",isOpen:E,onModalClose:o(),type:"success",children:(0,i.jsx)(I,{})})]}),(0,i.jsx)(u.Z,{isOpen:m,onModalClose:o(),type:"success",title:"",primaryButton:void 0,children:(0,i.jsx)(b.ZP,{onClose:function(){return p(!1)}})}),(0,i.jsx)(f,{hasSeenOnboardingDate:L()}),(0,i.jsx)(x.Z,{contextName:"proxy",initialData:N,paletteFeatures:r,features:new Set(s),pages:a},N.threadId)]})})}},85664:function(e,t,n){"use strict";n.d(t,{MY:function(){return f},PH:function(){return d},cc:function(){return h}});var r=n(61706),s=n(31501),i=n(61079),a=n(89874),o=n(45813),l=n(23221),c=n(80836),u=n(36613);n(24638);var d=function(){return{thread:(0,c.f1)(),currentLeafId:"root",threadId:null,title:"New chat"}};function h(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(function(e,t,n){var r,h,m;return(0,o.__generator)(this,function(o){switch(o.label){case 0:r=null,o.label=1;case 1:if(o.trys.push([1,4,,5]),!e)return[3,3];return[4,l.ZP.getConversation(e,n,t)];case 2:var f,p,x,b,v;return x=null===(p=Object.values((f=r=o.sent()).mapping).find(function(e){return null===e.parent}))||void 0===p?void 0:p.id,b=new Set,v=new Set,[2,{thread:((f.moderation_results||[]).forEach(function(e){e.blocked?v.add(e.message_id):e.flagged&&b.add(e.message_id)}),h={rootId:x,mapping:Object.keys(f.mapping).reduce(function(e,t){var n,r=f.mapping[t],o=r.parent,l=r.children,d=(0,a.Z)(r,["parent","children"]),h=f.mapping[t].message||(0,c.mH)();return v.has(h.id)?n=u.sK:b.has(h.id)&&(n=u.Mf),e[t]=(0,s.Z)((0,i.Z)((0,s.Z)({},d),{message:h,children:l||[],parentId:o||"",type:c.uV[h.role]}),n&&{metadata:n}),e},{}),currentLeafId:f.current_node}).mapping||(0,c.f1)(),currentLeafId:h.currentLeafId||h.rootId||"root",threadId:e,title:r.title||null}];case 3:return[3,5];case 4:return m=o.sent(),console.error(m),[3,5];case 5:return[2,d()]}})})).apply(this,arguments)}function f(e,t){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(function(e,t){var n,r;return(0,o.__generator)(this,function(s){switch(s.label){case 0:n=null,s.label=1;case 1:if(s.trys.push([1,4,,5]),!e)return[3,3];return[4,l.ZP.getRateLimitCaptchaItem(e,t)];case 2:return[2,n=s.sent()];case 3:return[3,5];case 4:return r=s.sent(),console.error(r),[3,5];case 5:return[2,n]}})})).apply(this,arguments)}},97838:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var r=n(70079),s=n(31178),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var m=a(e,(d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var n=r(e);return void 0!==s&&s(t,n)?t:(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=m},[m]),u(m),m}},92280:function(e,t,n){"use strict";e.exports=n(97838)},59268:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c}});let r=e=>{let t,n=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let i=t;t=(null!=r?r:"object"!=typeof s)?s:Object.assign({},t,s),n.forEach(e=>e(t,i))}},s=()=>t,i=e=>(n.add(e),()=>n.delete(e)),a=()=>n.clear(),o={setState:r,getState:s,subscribe:i,destroy:a};return t=e(r,s,o),o},s=e=>e?r(e):r;var i=n(70079),a=n(92280);let{useSyncExternalStoreWithSelector:o}=a,l=e=>{let t="function"==typeof e?s(e):e,n=(e,n)=>(function(e,t=e.getState,n){let r=o(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,i.useDebugValue)(r),r})(t,e,n);return Object.assign(n,t),n},c=e=>e?l(e):l}},function(e){e.O(0,[861,741,798,763,424,361,659,221,650,114,774,888,179],function(){return e(e.s=49529)}),_N_E=e.O()}]);